{% extends "base.html" %}
{% load static %}

{% block css %}
{% endblock css %}

{% block content %}
<!--================Content Area =================-->

<section class="about_area p_120">
        <div class="first_wrap" align="center">
            <div class="logo_div">
                <h1>
                        <img src="/beginner/images/header/txt_titleKIPRIS.png" alt="임치된 기술 간단 검색">
                    </a>
                </h1>
            </div>
            <div class="number_info">
                <table border="0">
                    <thead>
                        <tr>

                        </tr>
                    </thead>
                </table>
                <table border="0" class="number_info_howtouse">
                    <tbody>
                        <tr><td colspan="3" class="info_title fa fa-info-circle"><p>검색방법</p></td></tr>
                        <tr class="number_info_top number_info_bg">
                            <td colspan="2" class="number_info_howtouse_title"><b>분류번호</b> 선택</td>
                            <td><span class="number_info_gray"> 후 </span>기술 키워드 검색<span class="number_info_gray"> </span></td>
                        </tr>

                    </tbody>
                </table>
            </div>
            <section class="search_box_section" >
                <div id="search_box" class="first_search_box">
                    <form name="numberSearchF" id="numberSearchF" class="search_Form" method="post" action="/beginner/search/headerSearch.do">
                        <input type="hidden" id="searchRight" name="searchRight" value="">
                        <input type="hidden" id="searchType" name="searchType" value="SNU">
                        <input type="hidden" id="searchYear" name="searchYear" value="">
                        <input type="hidden" id="queryText" name="queryText" value="">
                        <input type="hidden" id="searchClass" name="searchClass" value="numberSearch">
                        <div class="search_box_wrap">
                             <select id="searchTypeSelect" class="search_type_select">
                                <option value="all" label="전체권리">전체권리</option>
                                <option value="10" label="(10)특허">(10)특허</option>
                                <option value="20" label="(20)실용신안">(20)실용신안</option>
                                <option value="30" label="(30)디자인">(30)디자인</option>
                                <option value="40" label="(40)상표">(40)상표</option>
                                <option value="41" label="(41)서비스표">(41)서비스표</option>
                                <option value="42" label="(42)업무표장">(42)업무표장</option>
                                <option value="43" label="(43)단체표장">(43)단체표장</option>
                                <option value="44" label="(44)지리적 표시 단체표장">(44)지리적 표시 단체표장</option>
                                <option value="45" label="(45)상표, 서비스표">(45)상표·서비스표</option>
                                <option value="47" label="(47)증명표장">(47)증명표장</option>
                                <option value="48" label="(48)지리적 표시 증명표장">(48)지리적 표시 증명표장</option>
                            </select>
                             <input type="text" id="searchKeyword" name="searchKeyword" class="search_keyword_box" value="" placeholder="키워드를 입력하세요">
                             <div class="searchButtonBox">
                                 <button title="검색" type="submit" id="numberSearchBtn" class="searchButton">검색</button>
                             </div>
                         </div>
                    </form>
                </div>
            </section>
        </div>
    <section class="contact_area p_100" >
            <div class="container" style="text-align:center;">
                <h3 class="mb-30 title_color">임치된 계약 목록</h3>
                <table class="table table-hover" width="90%">
                    <thead>
                        <tr>
                            <th>번호</th>
                            <th>임치 기술명</th>
                            <th>회사명</th>
                            <th>연락처</th>
                            <th>홈페이지 주소</th>
                        </tr>
                    </thead>

                    <tbody>
                    {% for enroll_info in enroll_infos %}
                        <tr>
                            <td>
                                <a href="#" trid="{{enroll_info.enroll_idx}}" class="tr_link">
                                    {{enroll_info.enroll_idx}}
                                </a>
                            </td>
                            <td>{{enroll_info.title}}</td>
                            <td>{{enroll_info.c_date}}</td> <!-- 임시로 작성 -->
                            <!--<td>{{enroll_info.enroll_date}}</td>-->
                            <td>{{enroll_info.end_date}}</td>
                            <td>
                                <a href="show_app/{{enroll_info.enroll_idx}}">
                                    <button type="button" class="btn btn-outline-warning" style="font-size:80%;"> 임치 증명서 발급 </button>
                                </a>
                            </td>
                        </tr>
                        {% for contract_info in contract_infos %}
                            {% if contract_info.enroll_idx.enroll_idx == enroll_info.enroll_idx %}
                                <tr id="tr_show" class="tr{{contract_info.enroll_idx.enroll_idx}}" style="{display:none}">
                                    <td>
                                        <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span>
                                    </td>
                                    <td>{{contract_info.cont_idx}}</td>
                                    <td>{{contract_info.c_date}}</td>
                                    <td>{{contract_info.end_date}}</td>
                                    <td>
                                        <a href="show_cont/{{enroll_info.enroll_idx}}-{{contract_info.cont_idx}}">
                                            <button type="button" class="btn btn-outline-success" style="font-size:80%;"> 계약 증명서 발급 </button>
                                        </a>
                                    </td>
                                </tr>
                            {% endif %}
                        {% endfor %}
                    {% endfor %}
                    </tbody>
                </table>
            </div>
    </section>
    <br><br><br><br><br><br><br><br><br>


    </section>









<!--================End Content Area =================-->
{% endblock content %}

{% block js %}
<script src="{% static 'js/jquery.form.js' %}"></script>
<script src="{% static 'js/jquery.validate.min.js' %}"></script>
<script src="{% static 'js/contact.js' %}"></script>
{% endblock js %}
<script type="text/javascript">
$(document).ready(function(){
        jQuery("#goTopBtn").click(function() { $(window).scrollTop(0);}) ;

        var yearObj = jQuery("#searchYearSelect");
        var date = new Date();
        for(var i = date.getFullYear(); i >= 1948; i--){
                yearObj.append("<option value=" + i + ">" + i + "</option>");
        }


        // 번호이미지 클릭했을때 셀렉트박스 선택되도록
        jQuery("#numberSearch10").click(function(){
                 $("#searchTypeSelect").val("10");
        });
        jQuery("#numberSearch20").click(function(evt) {
                 $("#searchTypeSelect").val("20");
        });
        jQuery("#numberSearch30").click(function(evt) {
                 $("#searchTypeSelect").val("30");
        });
        jQuery("#numberSearch40").click(function(evt) {
                 $("#searchTypeSelect").val("40");
        });


      $("#numberSearchF").submit(
            function(){
              //  alert("numberSearchBtn click 호출");
                $("#searchRight").val($("#searchTypeSelect option:selected").val()) ;
                $("#searchYear").val($("#searchYearSelect option:selected").val()) ;

                var queryTextCheck = $("#searchKeyword").val().trim();

                if((queryTextCheck =="" || queryTextCheck == null) ){
                    alert("번호를 입력해 주십시요.");
                    $("#searchKeyword").focus();
                    return false;
                }

                if(queryTextCheck.length  < 3){
                    alert("번호검색의 경우 최소 3자리 이상 입력하시기 바랍니다.");
                    return false;
                }

                //숫자없이 문자만 존재하는경우 검색 제외
                var numCheck = /[0-9]/;
                if(!numCheck.test(queryTextCheck)){
                    alert("번호검색에서는 숫자로만 검색 가능합니다. 키워드 검색을 원하시면 단계별 검색을 이용하시기 바랍니다.");
                    $("#searchKeyword").focus();
                    return false;
                }

                //공백처리
//                queryTextCheck = removeOperatorBlank(queryTextCheck);
                //검색식 유효성 검사
                if( checkVaildQuery(queryTextCheck) != true) return false;

                var srchright = $("#searchRight").val();
                var srchy = $("#searchYear").val();
                var srchk = $("#searchKeyword").val();
                var expr = $("#queryText").val();
                showLoadingBar('all','');
                if(srchright == "all"){
                    $("#searchRight").val("?");
                }
                if(srchy == "" || srchy == null){
                    $("#searchYear").val("?");
                }
                if(srchk == "" || srchk == null){
                    $("#searchKeyword").val("?");
                }

                $("#queryText").val(queryTextCheck);
             //   $("#numberSearchF").submit();
            }
        );
});


</script>