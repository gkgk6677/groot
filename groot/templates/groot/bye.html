{% extends "mypage-base.html" %}
{% load static %}

{% block css %}
{% endblock css %}

{% block sidebar %}
<div style="padding-left:40px;"><h1>회원탈퇴</h1></div><br><hr>
<div style="padding-right:40px;text-align:right">
    <a href="/main"><i class="fas fa-home"></i></a> &nbsp; > &nbsp; <a href="/mypage">마이페이지</a> &nbsp; > &nbsp; <a href="/bye">회원탈퇴</a>
</div>    
{% endblock sidebar %}

{% block content %}
    <div class="col-lg-9">
        <div class="contents" style="padding-bottom:110px;">
            <div style="text-align:center;">
                <h1>회원탈퇴</h1><br>
                <h6>그루트 홈페이지를 탈퇴하시게 되면 임치문서 및 관련된 모든 계약이 해지됩니다</h6>
                <h6>신중하게 결정하십시오.</h6>
                <br>
                <hr>
                그루트 홈페이지에서는 개인정보보호법 제 30조에 의거하여 탈퇴 시 개인정보를 파기하며<br>
                동일한 아이디로 재가입이 불가능합니다.
                <hr>
                <form id="bye_form" onsubmit="return check()" method="POST">
                    {% csrf_token %}
                    <div class="progress-table-wrap">
                        <div class="progress-table" style="text-align:center;">
                            <div class="table-head">
                                <div style="width: 150px; padding-left: 20px">비밀번호</div>
                                <div style="padding-left: 40px" ><input type="password" id="pw1" name="pw1" ></div>
                            </div>
                            <br>
                            <div class="table-head">
                                <div style="width: 150px; padding-left: 20px">비밀번호 확인</div>
                                <div style="padding-left: 40px"><input type="password" id="pw2" name="pw2" ></div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div>
                        <input type="submit" value="회원탈퇴" class="genric-btn info circle arrow" style="margin-top:30px">
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock content %}

{% block js %}
<script>
    $(function(){
        $('#pw1').change(function(){
            $('#pw1').css("background","");
        });
        $('#pw2').change(function(){
            $('#pw2').css("background","");
        });
    })

    function check(){
        pw1 = $('#pw1').val();
        pw2 = $('#pw2').val();
        if (pw1 != "{{userinfo.user_pw}}" && pw2 != "{{userinfo.user_pw}}"){
            alert('비밀번호가 틀렸습니다.');
            $('#pw1').focus();
            $('#pw1').select();
            $('#pw1').css("background","#F6A0A4");
            return false;
        }

        if (pw1 != pw2) {
            alert('두 비밀번호가 다릅니다.')
            $('#pw2').focus();
            $('#pw2').select();
            $('#pw2').css("background","#F6A0A4");
            return false;
        }
        alert('탈퇴되었습니다.');
        return true
    }
</script>
{% endblock js %}